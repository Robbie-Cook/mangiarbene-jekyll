I"´
<p>One of the best so called â€˜unusual use cases of Jekyllâ€™ is learning the basics of web development: html, css and JavaScript. But as the JavaScript part is growing in your application the need of a package manager like npm comes around and with that we reach the limits of using Jekyll. Although not impossible the production environment might becomes too complicated using two different compilers at the same time. Yet it we donâ€™t have to say goodbye to Jekyll at this point at all. It is very well possible to use Jekyll in creating API endpoints that can be consumed by other website generators. In this demo I will show the combination with React.</p>

<p>We start with a simple Jekyll website that constraints of two collections (â€˜cookbooksâ€™ and â€˜recipesâ€™) as well as a blog from which this post is the â€˜latestâ€™.</p>

<p>.â”€â”€ _books
â”œâ”€â”€ _config.yml
â”œâ”€â”€ _includes
â”œâ”€â”€ _layouts
â”œâ”€â”€ _posts
â”œâ”€â”€ _recipes
â”œâ”€â”€ _sass
â”œâ”€â”€ _site
â”œâ”€â”€ blog.md
â”œâ”€â”€ books.md
â”œâ”€â”€ index.md
â””â”€â”€ recipes.html</p>

<p>In Jekyll, we can call the recipes of a book, using a condition:</p>

<p>Likewise we can call the book of a recipe:</p>

<p>Both examples result in a data schema that is similar to the many-to-many-relationships used in non-relational databases like MongoDB. So what if in Jekyll we could use this technique to create a json file that contains the same structure. And we sure can!</p>

<p>Create a folder â€˜apiâ€™ with files for blog, books and recipes, like so:</p>

<p>â”œâ”€â”€ api
|   â”œâ”€â”€ blog.json
|   â”œâ”€â”€ books.json
|   â””â”€â”€ recipes.json</p>

<p>Now there is only one problem here, fortunatly with a simple solution. In order to achieve valid json, the last iteration cannot end with a comma. And because the if statement filters from an array, and therefore not all iterations will become valid, a comma cannot be avoided here.</p>

<p>The solution is to create a new array, using the push method, so we get rid of the conditional statement.</p>

<p>Finally check if the json is valid go to https://jsonlint.com/.</p>

<p>I published the result on Github and Cloudcannon.</p>

<p>Now we can use the json file calling: https://trim-seahorse.cloudvent.net/</p>

<p>Jekyll api endpoints</p>

<p><a href="https://trim-seahorse.cloudvent.net/api/recipes.json" target="_blank" rel="noopener noreferrer">
/api/recipes.json
</a>
<br />
<a href="https://trim-seahorse.cloudvent.net/api/books.json" target="_blank" rel="noopener noreferrer">
/api/books.json
</a>
<br />
<a href="https://trim-seahorse.cloudvent.net/api/blog.json" target="_blank" rel="noopener noreferrer">
/api/blog.json
</a></p>

<p>consume in React</p>

<p>(mangiarbene.io)</p>

:ET